services:
  nginx:
    image: nginx:alpine
    container_name: project-leroy-nginx
    ports:
      - "8080:8080"  # Custom port for security (matches production)
    volumes:
      # Mount web files to nginx html root
      - ./web:/usr/share/nginx/html:ro
      # Mount classified images to a separate location (avoid read-only conflicts)
      # Note: We mount to /var/www/html/classified and configure nginx to serve from there
      - ./storage/classified:/var/www/html/classified:ro
      # Mount visitations.json (already in ./web, but explicit for clarity)
      - ./web/visitations.json:/usr/share/nginx/html/visitations.json:ro
      # Custom nginx config
      - ./nginx.conf:/etc/nginx/conf.d/default.conf:ro
    restart: unless-stopped
    networks:
      - leroy-network

networks:
  leroy-network:
    driver: bridge

